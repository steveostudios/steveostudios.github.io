{"data":{"site":{"siteMetadata":{"title":"Steveostudios","author":"@steveostudios"}},"markdownRemark":{"id":"33e79c95-4fc8-580d-a32d-edc48234db57","excerpt":"Recently Sketch 43 introduced a new “open” file format in. I’m super fascinated by the idea of an open file format. I wanted to know more about what  exactly…","html":"<p>Recently Sketch 43 introduced a new “open” file format in. I’m super fascinated by the idea of an open file format. I wanted to know more about what <em>exactly</em> that means, because it could open up a world of possibility, one which is currently <em>closed</em> (pun intended) by Sketch’s competitors.</p>\n<p>So I set out to find out more. Here are my findings.</p>\n<p>I started by creating a folder with nothing in it. I then created a new Sketch document in that folder. I didn’t do anything to it (not even scroll or zoom inside).</p>\n<p>Now, generally with “open” file formats you can just drag-n-drop the file into a text editor and, boop-boop-beep, you can read the contents. However, when I tried to open my new Sketch file in my text editor, I got this:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/887b7a40eb9128fc3aa0e4e09ccb1313/0ea87/open-sketch-file-format-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 49.93749999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxk2sWMD/xAAZEAACAwEAAAAAAAAAAAAAAAAAMQECECH/2gAIAQEAAQUChHSqz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAAIDAAMAAAAAAAAAAAAAAAABEUGRITFh/9oACAEBAAE/IYx4eDmk8I9YdZY6P//aAAwDAQACAAMAAAAQKy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAACAgMBAQAAAAAAAAAAAAAAAREhQYGxMdH/2gAIAQEAAT8QaE5LuwmAKg82X4M9D6NuF4ZwR//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A robot threw-up on my screen\"\n        title=\"\"\n        src=\"/static/887b7a40eb9128fc3aa0e4e09ccb1313/4b3ab/open-sketch-file-format-1.jpg\"\n        srcset=\"/static/887b7a40eb9128fc3aa0e4e09ccb1313/f8bb1/open-sketch-file-format-1.jpg 148w,\n/static/887b7a40eb9128fc3aa0e4e09ccb1313/900ac/open-sketch-file-format-1.jpg 295w,\n/static/887b7a40eb9128fc3aa0e4e09ccb1313/4b3ab/open-sketch-file-format-1.jpg 590w,\n/static/887b7a40eb9128fc3aa0e4e09ccb1313/78641/open-sketch-file-format-1.jpg 885w,\n/static/887b7a40eb9128fc3aa0e4e09ccb1313/38a35/open-sketch-file-format-1.jpg 1180w,\n/static/887b7a40eb9128fc3aa0e4e09ccb1313/0ea87/open-sketch-file-format-1.jpg 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Hmmm. Okay, so not totally human readable. There are a couple of bits in here that are readable though… specifically the phrases user.json and document.json. A JSON file is type of file that is basically an organized list of data. These must refer to JSON files somewhere on my computer. This looks compelling, but I have no idea where those files are. Which got me thinking. Maybe the file is zipped?</p>\n<p>So, I tried right-clicking on the file to unzip. No luck. So I fired up Terminal an tried this (I did this in the directory of my Sketch file, which is called git_demo.sketch):</p>\n<p>$ unzip git<em>demo.sketch\nArchive: git</em>demo.sketch\ninflating: document.json<br>\ninflating: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json<br>\ninflating: user.json<br>\ninflating: meta.json<br>\ninflating: previews/preview.png</p>\n<p>Whoa! There we go. I see it even found auser.json and document.json. that were alluded to earlier. That’s cool!</p>\n<p>Now, let’s take a look at what these files probably are (I say probably because it’s all conjecture. I have no idea what Sketch does behind the scenes):\ndocument.json</p>\n<p>{\n”_class”: “document”,\n“do<em>objectID”: “45DEEB9C-77D3-42C1-8466-A3A26388931A”,\n“assets”: {\n“\\</em>class”: “assetCollection”,\n“colors”: [],\n“gradients”: [],\n“imageCollection”: {\n”_class”: “imageCollection”,\n“images”: {}\n},\n“images”: []\n},\n“currentPageIndex”: 0,\n“enableLayerInteraction”: true,\n“enableSliceInteraction”: true,\n“foreignSymbols”: [],\n“layerStyles”: {\n”_class”: “sharedStyleContainer”,\n“objects”: []\n},\n“layerSymbols”: {\n”_class”: “symbolContainer”,\n“objects”: []\n},\n“layerTextStyles”: {\n”_class”: “sharedTextStyleContainer”,\n“objects”: []\n},\n“pages”: [{\n”<em>class”: “MSJSONFileReference”,\n”</em>ref<em>class”: “MSImmutablePage”,\n”</em>ref”: “pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B”\n}]\n}</p>\n<p>In here you can find things like colors, gradients, symbols, images, and, layers. It looks like this is global settings are stored. I also see in here is a list of pages and artboards. I can see a reference to pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json so let’s take a look at that next.\npages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json</p>\n<p>{\n”_class”: “page”,\n“do<em>objectID”: “4E872A8F-0CE4-474F-A6D4-9C22990C9E9B”,\n“exportOptions”: {\n“\\</em>class”: “exportOptions”,\n“exportFormats”: [],\n“includedLayerIds”: [],\n“layerOptions”: 0,\n“shouldTrim”: false\n},\n“frame”: {\n”_class”: “rect”,\n“constrainProportions”: false,\n“height”: 300,\n“width”: 300,\n“x”: 0,\n“y”: 0\n},\n“isFlippedHorizontal”: false,\n“isFlippedVertical”: false,\n“isLocked”: false,\n“isVisible”: true,\n“layerListExpandedType”: 0,\n“name”: “Page 1”,\n“nameIsFixed”: false,\n“resizingType”: 0,\n“rotation”: 0,\n“shouldBreakMaskChain”: false,\n“style”: {\n”_class”: “style”,\n“endDecorationType”: 0,\n“miterLimit”: 10,\n“startDecorationType”: 0\n},\n“hasClickThrough”: true,\n“layers”: [],\n“horizontalRulerData”: {\n”_class”: “rulerData”,\n“base”: 0,\n“guides”: []\n},\n“includeInCloudUpload”: true,\n“verticalRulerData”: {\n”_class”: “rulerData”,\n“base”: 0,\n“guides”: []\n}\n}</p>\n<p>This looks like all of the data associated with my page (I only have one, since it’s a brand-spanking new file). I can see rulers, the page name, page size and a few other cool things in here. Note there are no layers. Also worth mentioning is the name of this file. 4E872A8… is probably a randomly generated number, so you could in theory have tons of pages and none of them conflict with each other.\nuser.json</p>\n<p>{\n“B79428F3-B5ED-4FB8-A32F-4A3731702ADA”: {\n“pageListHeight”: -1\n},\n“4E872A8F-0CE4-474F-A6D4-9C22990C9E9B”: {\n“scrollOrigin”: “{0, 0}”,\n“zoomValue”: 1\n}\n}</p>\n<p>This looks like it’s mostly stuff relating to you and your Sketch file. Stuff like your zoom and scroll. When you open up your Sketch project the next time, you want it to be just how you left it. Here is where that stuff gets stored.\nmeta.json</p>\n<p>{\n“commit”: “335a30073fcb2dc64a0abd6148ae147d694c887d”,\n“appVersion”: “43.1”,\n“build”: 39012,\n“app”: “com.bohemiancoding.sketch3”,\n“pagesAndArtboards”: {\n“4E872A8F-0CE4-474F-A6D4-9C22990C9E9B”: {\n“name”: “Page 1”,\n“artboards”: {}\n}\n},\n“fonts”: [],\n“created”: {\n“app”: “com.bohemiancoding.sketch3”,\n“commit”: “335a30073fcb2dc64a0abd6148ae147d694c887d”,\n“build”: 39012,\n“appVersion”: “43.1”,\n“variant”: “NONAPPSTORE”,\n“version”: 88\n},\n“version”: 88,\n“saveHistory”: [“NONAPPSTORE.39012”],\n“autosaved”: 0,\n“variant”: “NONAPPSTORE”\n}</p>\n<p>This looks like all of the info that the app will need that has little or nothing to do with your artwork: the version of Sketch used to make the file, a list of pages and artboards, fonts, autosave, etc. No actual art will be stored here. I see another reference to pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json. This must be another place that it attaches the name “Page 1” to my page.\npreviews/preview.png</p>\n<p>The last thing in my file is a preview.png, which in Finder looks like this:\nLook how beautiful!</p>\n<p>This is obviously the preview image that Sketch saves out. Most likely this is the image that Sketch uses on the startup screen where you can see recent Sketch files.\nWhy is this cool?</p>\n<p>Well, for one, it’s super nerdy and I like that. 🤓</p>\n<p>Two, you can alter your Sketch document without opening it up in Sketch! Let me show you.</p>\n<p>In Terminal run:</p>\n<p>$ unzip git<em>demo.sketch\nArchive: git</em>demo.sketch\ninflating: document.json<br>\ninflating: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json<br>\ninflating: user.json<br>\ninflating: meta.json<br>\ninflating: previews/preview.png</p>\n<p>This will unzip the Sketch file. Then open up meta.json and changed the line that says “name”: “Page 1” to :</p>\n<p>…\n“pagesAndArtboards”: {\n“4E872A8F-0CE4-474F-A6D4-9C22990C9E9B”: {\n“name”: “Master Page”,\n“artboards”: {}\n}\n},\n…</p>\n<p>Then you should change the same thing in pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json(We’re changing it in both places because I don’t actually know which one (or both) Sketch is using to read the page name and I don’t want to break my file):</p>\n<p>…\n“layerListExpandedType”: 0,\n“name”: “Master Page”,\n“nameIsFixed”: false,\n…</p>\n<p>Then we need to zip it up again. I’m going to save it as a new file so I don’t screw up my old file:</p>\n<p>$ zip git_demo2.sketch document.json pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json user.json meta.json previews/preview.png\nadding: document.json (deflated 50%)\nadding: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json (deflated 49%)\nadding: user.json (deflated 10%)\nadding: meta.json (deflated 46%)\nadding: previews/preview.png (deflated 89%)</p>\n<p>(All I did here is zip all of the individual files into a file called git_demo2.sketch.</p>\n<p>Now, double-click on your newly created git_demo2.sketch file and this is what you should see:\nI am the MASTER! MUHAHAH!</p>\n<p>Pretty slick, huh!</p>\n<p>Traditionally proprietary, closed file formats never let you edit their files. You needed X program to open X files (hah). But now a plugin developers can create things that run in conjunction with Sketch. You can have a web app to share and collaborate on Sketch files. You can have plugin to run Sketch files through and change all of your reds to light-blues. You can have scripts that automatically grab key info to drop into a CSS file. The possibilities are endless now! All thanks to an open file format.</p>","frontmatter":{"title":"What does the “open” Sketch file format really mean","date":"April 14, 2017"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017-04-14-open-sketch-file-format/","previous":{"fields":{"slug":"/2019-04-02-git-solo/"},"frontmatter":{"title":"Git for Solo Development"}},"next":null}}
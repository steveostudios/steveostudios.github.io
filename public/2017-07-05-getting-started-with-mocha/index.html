<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.ab56e90f540b7de7af21.css">:root{--primary-color:#eee841;--black:#1f1f1f;--white:#e8eaef;--trim:#cfd8d1;--grey:#b5b7ba}body,html{font-family:Roboto;background:var(--white);color:var(--black);margin:0;padding:0}.layout{display:grid;max-width:1200px;margin:0 auto;grid-template-columns:256px 1fr;grid-template-rows:6rem 1fr 3rem}h1{font-weight:900;font-size:3em;line-height:1}h1,h2{font-family:Source Sans Pro}h2{font-weight:300}h3{font-family:Source Sans Pro;text-transform:uppercase;font-weight:600;font-size:.875em;color:var(--black);line-height:1.5;padding-bottom:.75rem;margin:0}header{grid-column:span 2;padding:1rem 3rem;display:flex;justify-content:space-between;align-items:center;position:-webkit-sticky;position:sticky;top:0;background:var(--white);z-index:10}header .logo{margin:0;padding:1rem;font-weight:900;border:2px solid var(--black);border-radius:50%}header .menu{list-style:none;display:flex;padding:0;margin:0}header .menu li a{border:2px solid var(--black);padding:4px 8px;color:var(--black);margin-left:8px;text-decoration:none;font-family:Source Sans Pro;text-transform:uppercase;font-weight:600}header .menu li a:hover{border:2px solid var(--black);background:var(--black);color:var(--white)}aside{border-right:1px solid #cfd8d1;padding-left:3rem;padding-right:3rem;display:flex;flex-direction:column;text-align:center}aside .avatar{position:relative;display:inline-block;display:flex;margin-bottom:3rem}aside .avatar .headshot{position:absolute;height:8rem;width:8rem;display:inline-block}aside .avatar .headshot img,aside .avatar .headshot picture{border-radius:50%;height:8rem!important;width:8rem!important}aside .avatar .swatch{position:absolute;border-radius:50%;background:var(--primary-color);height:8rem;width:8rem;right:0;display:inline-block}aside .location{width:100%}aside .location,aside .location>*{display:flex;align-items:center;justify-content:center}aside .location>*{height:1.5rem;background:var(--black);min-width:24px;margin-right:2px;color:var(--white);font-weight:900;font-size:.75rem;padding:0;height:32px;flex:1 1;margin-bottom:48px}aside .location>:first-of-type{max-width:32px}aside .location svg{fill:var(--primary-color);height:16px}aside .social-list{list-style:none;padding:0;margin:0;display:flex;justify-content:space-between}aside .social-list a{opacity:.25;transition:opacity .25s ease-in-out}aside .social-list a:hover{opacity:.5}aside .social-list img{width:32px}main{padding-left:3rem;padding-right:3rem}footer{grid-column:span 2;width:100%;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #cfd8d1;color:#cfd8d1;text-decoration:none;font-family:Source Sans Pro;text-transform:uppercase;font-weight:300;font-size:.875rem}.book-list{list-style:none;padding:0;margin:0;width:100%;position:relative;box-sizing:border-box}.book-list-year{list-style:none;padding:0;display:grid;grid-gap:calc(1em + 2vw);grid-template-columns:1fr 1fr;font-size:.875em;margin:0 0 calc(1em + 2vw);line-height:1.2}.book-list .year h5 span{opacity:.5;font-weight:300;margin-left:8px}.book{position:relative;text-align:center}.book .progress-bar{margin:4px 0 16px;width:inherit;display:block;height:4px;background-color:var(--trim)}.book .progress-bar span{background-color:var(--primary-color);height:100%;display:block}.book .gatsby-image-wrapper{min-width:129px;max-width:156px;max-height:200px;height:200px;-o-object-fit:cover;object-fit:cover}@media (min-width:30em){.book-list-year{grid-template-columns:repeat(auto-fill,minmax(8em,1fr))}.book img{height:270px}}.enneagram p{font-family:Roboto;font-size:.875rem;margin:0}.briggsmyers p{font-family:Roboto;font-size:1.25rem;font-weight:300;margin:0}.strengthsfinder ol{padding-left:16px;font-size:.875rem;margin:0}.work-history ul{display:flex;flex-direction:column;position:relative;padding:0 0 1.5rem;list-style:none}.work-history ul:before{position:absolute;display:block;top:0;bottom:0;background-color:var(--trim);left:1rem;width:2px;transform:translateX(-1px);content:""}.work-history ul li{position:relative;margin-left:6px;display:flex;margin-bottom:2rem}.work-history ul li .dot-double{background:var(--white);border:2px solid var(--trim);width:16px;height:16px;display:inline-block;margin-right:1rem;border-radius:9999px}.work-history ul li h4{margin:0;font-family:Roboto;font-weight:300;font-size:.875rem;text-transform:uppercase}.work-history ul li p{margin:0;font-size:.75rem}.work-history ul li .dates{color:var(--grey)}.about>div{font-size:.875rem;line-height:1.5}.education-history ul{display:flex;flex-direction:column;position:relative;padding:0 0 1.5rem;list-style:none}.education-history ul:before{position:absolute;display:block;top:0;bottom:0;background-color:var(--trim);left:1rem;width:2px;transform:translateX(-1px);content:""}.education-history ul li{position:relative;margin-left:6px;display:flex;margin-bottom:2rem}.education-history ul li .dot-double{background:var(--white);border:2px solid var(--trim);width:16px;height:16px;display:inline-block;margin-right:1rem;border-radius:9999px}.education-history ul li h4{margin:0;font-family:Roboto;font-weight:300;font-size:.875rem;text-transform:uppercase}.education-history ul li p{margin:0;font-size:.75rem}.education-history ul li .dates{color:var(--grey)}.personality{grid-template-columns:repeat(3,1fr)}.history,.personality{display:grid;margin-bottom:4rem}.history{grid-template-columns:repeat(2,1fr)}.about{display:grid;grid-template-columns:1fr;margin-bottom:4rem}.posts{list-style:none;padding:0;margin:0}.posts li{border-bottom:1px solid var(--trim)}.posts li:last-of-type{border-bottom:none}.posts a{padding:2rem 0;color:var(--black);text-decoration:none;display:flex;justify-content:space-between;align-items:center}.posts h3{padding:0;font-size:1rem}</style><meta name="generator" content="Gatsby 2.24.54"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link as="script" rel="preload" href="/webpack-runtime-56b45a7b0cd42b28fd80.js"/><link as="script" rel="preload" href="/framework-63ec46a3540d83159f28.js"/><link as="script" rel="preload" href="/app-43abd966dff13887ce9e.js"/><link as="script" rel="preload" href="/styles-c2fe8482057191dca484.js"/><link as="script" rel="preload" href="/commons-5ff8f652f8417160ee4d.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-48479e4f7df1267a646e.js"/><link as="fetch" rel="preload" href="/page-data/2017-07-05-getting-started-with-mocha/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2850117025.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3463995804.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout"><header><div class="logo">SS</div><ul class="menu"><li><a href="/">About</a></li><li><a href="/blog">Blog</a></li><li><a href="/books">Books</a></li></ul></header><aside><h1>Steve Stone</h1><h2>Developer. Designer. Youth Worker. Nerd.</h2><div class="avatar"><div class="swatch"></div><div class="headshot gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:144px;height:144px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAQFBgED/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgEA/9oADAMBAAIQAxAAAAGVE9qTXSM6RmVpLwI//8QAHBAAAgICAwAAAAAAAAAAAAAAAQIDEQATIjEy/9oACAEBAAEFAphSztzGmpXCrsNrM6iXo+s//8QAFhEBAQEAAAAAAAAAAAAAAAAAEAEh/9oACAEDAQE/AcKf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAIQEf/aAAgBAgEBPwFiNf/EABsQAAMAAgMAAAAAAAAAAAAAAAABERAhAhJB/9oACAEBAAY/AnvwvB7QrBu14nYSz//EABsQAAIDAAMAAAAAAAAAAAAAAAABESExQWFx/9oACAEBAAE/IaizcN9HWSRkaZSUDjNDpuEFGhFeK9EuuxH/2gAMAwEAAgADAAAAEEsIA//EABkRAAMAAwAAAAAAAAAAAAAAAAABERAhQf/aAAgBAwEBPxBQtlOcf//EABgRAQADAQAAAAAAAAAAAAAAAAEAEBEh/9oACAECAQE/EAV5N2//xAAcEAEBAQACAwEAAAAAAAAAAAABEQAhMUFRcYH/2gAIAQEAAT8Q8bc8V7ZLO0YT2v5mZOS08zARceh8zXfL4G4MzoEs0lBc+ucQIhXG6du//9k=" alt="headshot" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/cd8d227cef746993a20fd056f210bd90/9d183/steveostudios.jpg 1x,
/static/cd8d227cef746993a20fd056f210bd90/a8f18/steveostudios.jpg 1.5x,
/static/cd8d227cef746993a20fd056f210bd90/68d2d/steveostudios.jpg 2x" /><img loading="lazy" width="144" height="144" srcset="/static/cd8d227cef746993a20fd056f210bd90/9d183/steveostudios.jpg 1x,
/static/cd8d227cef746993a20fd056f210bd90/a8f18/steveostudios.jpg 1.5x,
/static/cd8d227cef746993a20fd056f210bd90/68d2d/steveostudios.jpg 2x" src="/static/cd8d227cef746993a20fd056f210bd90/9d183/steveostudios.jpg" alt="headshot" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="location"><div><svg height="128" viewBox="0 0 128 128" width="128" xmlns="http://www.w3.org/2000/svg"><path d="m68.9329793 125.417448c36.3243767-52.6595419 43.0667917-58.0640701 43.0667917-77.4172954 0-26.5097024-21.490183-47.99988557-47.9998854-47.99988557-26.5097025 0-47.9998856 21.49018317-47.9998856 47.99988557 0 19.3532253 6.7424156 24.7577535 43.0667919 77.4172954 2.3835392 3.443352 7.482404 3.443596 9.8661874 0zm-4.9330937-57.4173431c-11.045628 0-19.9999524-8.9543244-19.9999524-19.9999523 0-11.045628 8.9543244-19.9999523 19.9999524-19.9999523 11.0456279 0 19.9999523 8.9543243 19.9999523 19.9999523 0 11.0456279-8.9543244 19.9999523-19.9999523 19.9999523z"></path></svg></div><div>Louisville, KY</div></div><ul class="social-list"><li><a href="https://github.com/steveostudios"><img src="/static/6b75637e548396e21d9e10827e5d3cb5/github.svg" alt="github"/></a></li><li><a href="https://vimeo.com/steveostudios"><img src="/static/8ca8b175450f417d098566709326e241/vimeo.svg" alt="vimeo"/></a></li><li><a href="https://dribble.com/steveostudios"><img src="/static/068b3757777905482190b9e8c86fe1ab/dribbble.svg" alt="dribble"/></a></li><li><a href="https://twitter.com/steveostudios"><img src="/static/4cc48e7d21fbe25a1ce2649e08c60a6c/twitter.svg" alt="twitter"/></a></li></ul></aside><main><div><h1>Getting Started with Mocha testing in Javascript</h1><div><p>Testing is one of those things that I have shrugged off for a while. It’s like flossing. I know the benefits. People say that it’s easy. It will make Future-Steve invincible. And, I feel bad about <em>not</em> doing it. It just is one more thing that I am unsure of how to fit into my daily routine. So, with this new project I am working on I decided to do it right from the beginning.</p>
<p>I’m going to show you how to do some basic testing. Our end goal for this post will be to write a test for the following module:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// index.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">isValidEmail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>email <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token regex">/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(Side note: I know that this regular expression is not perfect. There are thousands of these out there and with every one a <em>thousand-and-one critics.</em> That said, we’re gonna write some tests against this function.)</p>
<p>We’re going to use <a href="https://mochajs.org/" title="Mocha">Mocha</a> for our testing framework. Honestly, to get started I looked for the most popular framework and went with that. I don’t know a whole lot about testing at this point, so I wanted to use something well documented and well used.</p>
<p>We’re also going to use <a href="http://chaijs.com/" title="Chai">Chai</a>. From my understanding this is a Mocha plugin that just adds some assertions. It’s gonna make our tests more human-discernible.</p>
<p>Let’s start by installing these:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i mocha -D
<span class="token function">npm</span> i chai -D</code></pre></div>
<p>…and open up our new <code class="language-text">test.js</code> file.</p>
<p>From here, we need to initiate our Javascript file and let it know what it’s supposed to do.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// test/test.js</span>
<span class="token string">'use strict'</span>
<span class="token keyword">const</span> chai <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chai'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../index'</span><span class="token punctuation">)</span></code></pre></div>
<p>Here we are using Chai like a plugin by requiring it. Also, we’re require the file we want to test. Makes sense, right?!</p>
<p>Okay, now, let’s write our first <code class="language-text">describe</code>. A <code class="language-text">describe</code> tells Mocha how to treat a certain function.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// test/test.js</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#isValidEmail'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// we're going to put our actual test in here.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Sweet. Now the first test we want to write is to make sure a “normal looking” email address (like “abc@def.com) ”returns true. So, in the describe let’s add our test. (the new stuff is in <strong>bold</strong>).</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// test/test.js</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#isValidEmail'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return true for abc@def.com'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> login<span class="token punctuation">.</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span><span class="token string">'abc@def.com'</span><span class="token punctuation">)</span>
    chai<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now, let’s break this down. The <code class="language-text">it</code> line should read like a sentence, phrased with <em>“it should…”</em> and then what it should do. Treat this like a note about how the code should test. If the test fails you will see this, so it needs to be helpful as to what this test is actually testing.</p>
<p>Next, we save the result of the function (with the fake email address) as a variable.</p>
<p>Finally, we use Chai to describe what we want the result to look like. It’s crazy how readable this is!</p>
<p>Chai expect[s][the] result to be true.</p>
<p>BOOM! We wrote a test!</p>
<p>…but how do we… <em>test it…</em></p>
<p>It turns out this is ridiculously simple with npm. In your package.json, let’s add a test script</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token comment">// package.json</span>
...
<span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"mocha --reporter spec"</span>
<span class="token punctuation">}</span>
...</code></pre></div>
<p>Here we are telling npm that Mocha is our tester. Somehow it will find that <code class="language-text">test.js</code> file. Now, if we run <code class="language-text">npm test</code> in our terminal, Mocha should run the test file and should spit out some stuff!</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token operator">></span> mocha --reporter spec

<span class="token comment">#isValidEmail</span>
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.com

<span class="token number">1</span> passing <span class="token punctuation">(</span>9ms<span class="token punctuation">)</span></code></pre></div>
<p>WHAT! This is freaking cool — and easy!</p>
<p>Let’s add a few more tests for giggles:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// user forgot the `something@`</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should return false for abcdef.com"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> login<span class="token punctuation">.</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span><span class="token string">"abcdef.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  chai<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// user forgot the `.com`</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should return false for abc@def"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> login<span class="token punctuation">.</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span><span class="token string">"abc@def"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  chai<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// test for 2 character TLDs</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should return true for abc@def.co"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> login<span class="token punctuation">.</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span><span class="token string">"abc@def.co"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  chai<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// test for country TLDs</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should return true for abc@def.co.uk"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> login<span class="token punctuation">.</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span><span class="token string">"abc@def.co.uk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  chai<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>and then run <code class="language-text">npm test</code>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token operator">></span> mocha --reporter spec

<span class="token comment">#isValidEmail</span>
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.com
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">false</span> <span class="token keyword">for</span> abcdef.com
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">false</span> <span class="token keyword">for</span> abc@def
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.co
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.co.uk

<span class="token number">5</span> passing <span class="token punctuation">(</span>26ms<span class="token punctuation">)</span></code></pre></div>
<p>Sweet. Now, let’s say the Future-Steve rides in on his hover-board and messes something up with this function (because in the future I still don’t understand regular expressions!).</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// index.js</span>

<span class="token comment">// removed the bold *(\.\w+)+$ from the old verion</span>
<span class="token comment">// which is the bit at the end that tell it that it needs the '.com'</span>

<span class="token comment">// Future-Steve's modified code</span>
<span class="token keyword">const</span> <span class="token function-variable function">isValidEmail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>email <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token regex">/^\w+([\.-]?\w+)\*@\w+([\.-]?\w+)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When Future-Steve runs <code class="language-text">npm test</code>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token operator">></span> mocha --reporter spec

<span class="token comment">#isValidEmail</span>
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.com
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">false</span> <span class="token keyword">for</span> abcdef.com <span class="token number">1</span><span class="token punctuation">)</span> should <span class="token builtin class-name">return</span> <span class="token boolean">false</span> <span class="token keyword">for</span> abc@def
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.co
✓ should <span class="token builtin class-name">return</span> <span class="token boolean">true</span> <span class="token keyword">for</span> abc@def.co.uk

<span class="token number">4</span> passing <span class="token punctuation">(</span>26ms<span class="token punctuation">)</span>
<span class="token number">1</span> failing

<span class="token number">1</span>. <span class="token comment">#isValidEmail should return false for abc@def:</span>

   AssertionError: expected <span class="token boolean">true</span> to be <span class="token boolean">false</span>

   - expected - actual

   -true
   +false

   at Context.it <span class="token punctuation">(</span>test/test.js:47:30<span class="token punctuation">)</span></code></pre></div>
<p>Ha! Booyah Future-Steve! In your FACE! Future-Steve will know what he broke and exactly how he can fix it! Pretty cool!</p></div></div></main><footer>©2020 steve stone</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-52636837-4', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017-07-05-getting-started-with-mocha/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-939b6eeea0ccf3d28b32.js"],"app":["/app-43abd966dff13887ce9e.js"],"component---src-templates-books-js":["/component---src-templates-books-js-2f0081867cca973f3e3b.js"],"component---src-templates-home-js":["/component---src-templates-home-js-4951f74bef7b685a246b.js"],"component---src-templates-post-js":["/component---src-templates-post-js-48479e4f7df1267a646e.js"],"component---src-templates-posts-js":["/component---src-templates-posts-js-463d34824401f6a5a264.js"]};/*]]>*/</script><script src="/polyfill-939b6eeea0ccf3d28b32.js" nomodule=""></script><script src="/component---src-templates-post-js-48479e4f7df1267a646e.js" async=""></script><script src="/commons-5ff8f652f8417160ee4d.js" async=""></script><script src="/styles-c2fe8482057191dca484.js" async=""></script><script src="/app-43abd966dff13887ce9e.js" async=""></script><script src="/framework-63ec46a3540d83159f28.js" async=""></script><script src="/webpack-runtime-56b45a7b0cd42b28fd80.js" async=""></script></body></html>